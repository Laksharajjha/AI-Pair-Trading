{% extends "base.html" %}
{% block content %}

<div class="card shadow-sm p-4 mb-4" style="max-width: 800px; margin:auto;">
  <h3 class="mb-3">ðŸ“Š Run Single Pair Strategy</h3>

  <form method="POST" class="row g-3">
    <div class="col-md-6">
      <label class="form-label fw-semibold">Ticker 1</label>
      <input class="form-control" name="ticker1" value="AAPL">
    </div>

    <div class="col-md-6">
      <label class="form-label fw-semibold">Ticker 2</label>
      <input class="form-control" name="ticker2" value="MSFT">
    </div>

    <div class="col-md-6">
      <label class="form-label">Period</label>
      <select name="period" class="form-select">
        <option value="3mo">3 Months</option>
        <option value="6mo" selected>6 Months</option>
        <option value="1y">1 Year</option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Interval</label>
      <select name="interval" class="form-select">
        <option value="1d">Daily</option>
        <option value="1wk">Weekly</option>
      </select>
    </div>

    <div class="col-12 text-center mt-3">
      <button class="btn btn-primary px-4 py-2">
        Run Strategy ðŸš€
      </button>
    </div>
  </form>
</div>


{% if result %}
<div class="card p-4 mt-4">
  <h4>ðŸ“Š Pair Trading Results</h4>

  <div class="row text-center mt-3 mb-3">
    <div class="col-md-2"><b>Sharpe</b><br>{{ result.stats.sharpe|round(3) }}</div>
    <div class="col-md-2"><b>Return</b><br>{{ result.stats.total_return|round(3) }}</div>
    <div class="col-md-2"><b>Drawdown</b><br>{{ result.stats.max_drawdown|round(3) }}</div>
    <div class="col-md-2"><b>Accuracy</b><br>{{ result.model_accuracy|round(3) }}</div>
    <div class="col-md-2"><b>Î² Hedge</b><br>{{ result.beta|round(3) }}</div>
  </div>

  <hr>

  <h5 class="mt-3">Price Chart</h5>
  <img src="data:image/png;base64,{{ result.price_img }}" class="img-fluid rounded shadow">

  <h5 class="mt-4">Equity Curve</h5>
  <img src="data:image/png;base64,{{ result.equity_img }}" class="img-fluid rounded shadow">

  <h5 class="mt-4">Spread vs Z-score</h5>
  <img src="data:image/png;base64,{{ result.spread_img }}" class="img-fluid rounded shadow">
</div>
{% endif %}

{% endblock %}