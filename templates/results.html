{% extends "base.html" %}
{% block content %}

{% if result %}
<div class="card shadow-sm p-4">

  <h3 class="mb-4 text-center">ðŸ“Š Pair Trading Results</h3>

  <table class="table table-bordered text-center">
    <tr><th>Sharpe</th><td>{{ result.stats.sharpe|round(3) }}</td></tr>
    <tr><th>Return</th><td>{{ result.stats.total_return|round(3) }}</td></tr>
    <tr><th>Drawdown</th><td>{{ result.stats.max_drawdown|round(3) }}</td></tr>
    <tr><th>Accuracy</th><td>{{ result.model_accuracy|round(3) }}</td></tr>
    <tr><th>Î² Hedge</th><td>{{ result.beta|round(3) }}</td></tr>
  </table>

  <hr>

  <h5>Price Chart</h5>
  <img src="data:image/png;base64,{{ result.price_img }}" class="img-fluid mb-3">

  <h5>Equity Curve</h5>
  <img src="data:image/png;base64,{{ result.equity_img }}" class="img-fluid mb-3">

  <h5>Spread vs Z-score</h5>
  <img src="data:image/png;base64,{{ result.spread_img }}" class="img-fluid mb-3">

  <div class="text-center mt-4">
    <a href="/" class="btn btn-secondary">Back</a>
  </div>
</div>
{% else %}

<div class="card shadow-sm p-4 mx-auto" style="max-width:650px;">
  <h3 class="mb-4 text-center">Run Pair-Trade Strategy</h3>

  <form method="POST" class="row g-3">
    <div class="col-md-6">
      <label class="form-label fw-semibold">Ticker 1</label>
      <input class="form-control" name="ticker1" value="AAPL">
    </div>

    <div class="col-md-6">
      <label class="form-label fw-semibold">Ticker 2</label>
      <input class="form-control" name="ticker2" value="MSFT">
    </div>

    <div class="col-md-6">
      <label class="form-label">Period</label>
      <select name="period" class="form-select">
        <option value="3mo">3 Months</option>
        <option value="6mo" selected>6 Months</option>
        <option value="1y">1 Year</option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Interval</label>
      <select name="interval" class="form-select">
        <option value="1d">Daily</option>
        <option value="1wk">Weekly</option>
      </select>
    </div>

    <div class="col-12 text-center mt-3">
      <button class="btn btn-primary px-4 py-2">
        Run Strategy ðŸš€
      </button>
    </div>
  </form>
</div>
{% endif %}

{% endblock %}